#!/bin/bash
_hswitch()
{
    cur="${COMP_WORDS[COMP_CWORD]}"
    prev="${COMP_WORDS[COMP_CWORD-1]}"
    commands="-l -add -replace -all-groups -all-hosts"

    if [ $COMP_CWORD == 1 ]
    then
      COMPREPLY=($(compgen -W "${commands}" -- ${cur}))
      return 0
    fi

    if [ $COMP_CWORD == 2 ]
    then
        case "$prev" in
            "-l")
              box_commands=`hswitch -all-hosts`
              COMPREPLY=($(compgen -W "${box_commands}" -- ${cur}))
              return 0
            ;;
#            "help")
#              COMPREPLY=($(compgen -W "${commands}" -- ${cur}))
#              return 0
#            ;;
#            *)
#            ;;
        esac
    fi

#    if [ $COMP_CWORD == 3 ]
#    then
#      action="${COMP_WORDS[COMP_CWORD-2]}"
#      if [ $action == 'box' ]
#      then
#        case "$prev" in
#            "remove"|"repackage")
#              local box_list=$(find $HOME/.vagrant/boxes/* -maxdepth 0 -type d -printf '%f ')
#              COMPREPLY=($(compgen -W "${box_list}" -- ${cur}))
#              return 0
#              ;;
#            *)
#            ;;
#        esac
#      fi
#    fi

}
complete -F _hswitch hswitch

